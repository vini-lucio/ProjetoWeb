{% extends "dashboards/base.html" %}

{% block conteudo %}

    <section class="principal">
        <div class="dashboard-vendas-conteudo">

            <div class="grid-dashboard-2">

                <div class="moldura-verde-dashboard grid-dashboard">

                    <div>
                        <div class="div-dashboard">
                            <p class="fonte-verde">Meta Diaria</p>
                            <p>R$ {{ dados.meta_diaria }}</p>
                        </div>

                        {% comment %} O estilo --largura-grafico:33rem não carrega direito no safari, usar em pixel ou script que reaplica depois de um timeout {% endcomment %}
                        <div 
                            class="pie animate no-round" 
                            style="--valor-pizza:{{ dados.porcentagem_meta_dia }};--largura-barra:3rem;--cor-barra:var(--azul-escuro);--largura-grafico:33rem;--tamanho-fonte:8.5rem"
                        >
                        {{ dados.porcentagem_meta_dia }}%<br>
                        <p>R$ {{ dados.faltam_meta_dia }}<br><span class="fonte-verde">Faltam no dia</span></p>
                        </div>

                        <div class="div-dashboard">
                            <p class="fonte-verde">Pedidos Hoje</p>
                            <p>R$ {{ dados.pedidos_dia }}</p>
                        </div>
                    </div>

                    <div>
                        <div class="div-dashboard">
                            <p class="fonte-verde">Conversão de Orçamentos*</p>
                            <p>{{ dados.conversao_de_orcamentos }}%</p>
                            <p class="fonte-muito-pequena-dashboard">* Ultimos 90 dias</p>

                            <p class="fonte-verde">Faltam Orçamentos Dia**</p>
                            <p>R$ {{ dados.faltam_abrir_orcamentos_dia }}</p>
                            <p class="fonte-muito-pequena-dashboard">** Novos orçamentos para bater a meta do dia</p>
                        </div>
                    </div>

                </div>

                <div class="moldura-verde-dashboard grid-dashboard">

                    <div>
                        <div class="div-dashboard">
                            <p class="fonte-verde">Meta Mensal</p>
                            <p>R$ {{ dados.meta_mes }}</p>
                        </div>

                        {% comment %} O estilo --largura-grafico:33rem não carrega direito no safari, usar em pixel ou script que reaplica depois de um timeout {% endcomment %}
                        <div 
                            class="pie animate no-round" 
                            style="--valor-pizza:{{ dados.porcentagem_meta_mes }};--largura-barra:3rem;--cor-barra:var(--azul-escuro);--largura-grafico:33rem;--tamanho-fonte:8.5rem"
                        >
                        {{ dados.porcentagem_meta_mes }}%<br>
                        <p>R$ {{ dados.faltam_meta_mes }}<br><span class="fonte-verde">Faltam no mês</span></p>
                        </div>

                        <div class="div-dashboard">
                            <p class="fonte-verde">Pedidos Mês</p>
                            <p>R$ {{ dados.pedidos_mes }}</p>
                        </div>
                    </div>

                </div>

            </div>

        </div>
    </section>

    {% comment %} O estilo --largura-grafico:33rem não carrega direito no safari, usar em pixel ou script que reaplica depois de um timeout {% endcomment %}
    <script>
        setTimeout(function() {
            var elements = document.querySelectorAll('.pie');
            elements.forEach(function(element) {
                element.style.setProperty('--largura-grafico', '20rem');
            });
        }, 3000); // Delay for 1000 milliseconds = 1 second
    </script>
    
{% endblock conteudo %}